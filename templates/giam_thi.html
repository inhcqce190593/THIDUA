<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang Giám Thị – Ghi Nhận</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .container { padding: 30px; }
    h2, h4 { margin-bottom: 20px; }
    table th, table td { vertical-align: middle !important; }
    .btn-sm { font-size: 0.8rem; }
  </style>
</head>
<body>
<div class="container">
  <h2 class="text-center text-primary mb-4">🧑‍🏫 Trang Giám Thị – Tuần {{ tuan }}</h2>

  <!-- Nút ghi nhận -->
  <div class="mb-4 d-flex justify-content-end gap-2">
    <a href="{{ url_for('add_hoc_tap_gt') }}" class="btn btn-success">➕ Ghi nhận Học Tập</a>
    <a href="{{ url_for('add_noi_quy_gt') }}" class="btn btn-danger">➕ Ghi nhận Vi Phạm</a>
  </div>

  <!-- Bảng Học Tập -->
  <h4 class="text-success">📘 Danh sách Học Tập</h4>
  {% if study_data %}
  <div class="table-responsive mb-4">
    <table class="table table-bordered table-striped align-middle">
      <thead class="table-success">
        <tr>
          <th>Lớp</th>
          <th>Giờ A</th><th>Giờ B</th><th>Giờ C</th><th>Giờ D</th>
          <th>Đạt Kiểu Mẫu</th><th>Tổng Điểm</th><th>Tuần</th><th>Xóa</th>
        </tr>
      </thead>
      <tbody>
        {% for item in study_data %}
        <tr>
          <td>{{ item.lop }}</td>
          <td>{{ item.gio_a }}</td>
          <td>{{ item.gio_b }}</td>
          <td>{{ item.gio_c }}</td>
          <td>{{ item.gio_d }}</td>
          <td>{{ item.dat_kieu_mau }}</td>
          <td>{{ item.tong_diem }}</td>
          <td>{{ item.tuan }}</td>
          <td>
            <form method="post">
              <input type="hidden" name="data_id" value="{{ item.id }}">
              <input type="hidden" name="data_type" value="study">
              <button name="delete_data" class="btn btn-sm btn-danger" onclick="return confirm('Xóa mục này?')">🗑</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <p class="text-muted">Không có dữ liệu học tập cho tuần này.</p>
  {% endif %}

  <!-- Bảng Vi Phạm -->
  <h4 class="text-danger">📕 Danh sách Vi Phạm Nội Quy</h4>
  {% if rules_data %}
  <div class="table-responsive mb-4">
    <table class="table table-bordered table-striped align-middle">
      <thead class="table-danger">
        <tr>
          <th>Lớp</th>
          <th>Nội dung</th><th>Điểm Trừ</th><th>Số lượt</th><th>Học sinh</th><th>Tổng điểm</th><th>Tuần</th><th>Xóa</th>
        </tr>
      </thead>
      <tbody>
        {% for item in rules_data %}
        <tr>
          <td>{{ item.lop }}</td>
          <td>{{ item.noi_dung_vi_pham }}</td>
          <td>{{ item.diem_tru }}</td>
          <td>{{ item.so_luot_vi_pham }}</td>
          <td>{{ item.ten_hoc_sinh_vi_pham }}</td>
          <td>{{ item.tong_diem_vi_pham }}</td>
          <td>{{ item.tuan }}</td>
          <td>
            <form method="post">
              <input type="hidden" name="data_id" value="{{ item.id }}">
              <input type="hidden" name="data_type" value="rules">
              <button name="delete_data" class="btn btn-sm btn-danger" onclick="return confirm('Xóa mục này?')">🗑</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <p class="text-muted">Không có dữ liệu vi phạm nội quy cho tuần này.</p>
  {% endif %}
</div>
</body>
</html>
