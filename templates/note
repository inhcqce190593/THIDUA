<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Ch·ªß</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 8px 0; }
        a { text-decoration: none; color: #007BFF; }
        a:hover { text-decoration: underline; }
        form input, form textarea, form button {
            display: block;
            margin: 8px 0;
            padding: 8px;
            width: 100%;
            max-width: 400px;
        }<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Trang Ch·ªß</title>
        </head>
        <body>
            <h1>Trang Ch·ªß</h1>
        
            <!-- Form Th√™m D·ªØ Li·ªáu H·ªçc T·∫≠p -->
            <h2>Th√™m D·ªØ Li·ªáu H·ªçc T·∫≠p</h2>
            <form method="POST" action="/add-hoc-tap">
                <input type="text" name="tuan" placeholder="Tu·∫ßn" required>
                <input type="text" name="lop" placeholder="L·ªõp" required>
                <input type="number" name="gio_a" placeholder="S·ªë gi·ªù A" required>
                <input type="number" name="gio_b" placeholder="S·ªë gi·ªù B" required>
                <input type="number" name="gio_c" placeholder="S·ªë gi·ªù C" required>
                <input type="number" name="gio_d" placeholder="S·ªë gi·ªù D" required>
                <input type="text" name="dat_kieu_mau" placeholder="ƒê·∫°t ki·ªÉu m·∫´u" required>
                <button type="submit">Th√™m D·ªØ Li·ªáu</button>
            </form>
        
            <hr>
        
            <!-- Form Th√™m D·ªØ Li·ªáu N·ªôi Quy -->
            <h2>Th√™m D·ªØ Li·ªáu N·ªôi Quy</h2>
            <form method="POST" action="/add-noi-quy">
                <input type="text" name="tuan" placeholder="Tu·∫ßn" required>
                <input type="text" name="lop" placeholder="L·ªõp" required>
                <textarea name="noi_dung_vi_pham" placeholder="N·ªôi dung vi ph·∫°m" required></textarea>
                <input type="text" name="danh_gia" placeholder="ƒê√°nh gi√°" required>
                <input type="number" name="so_luot_vi_pham" placeholder="S·ªë l∆∞·ª£t vi ph·∫°m" required>
                <button type="submit">Th√™m D·ªØ Li·ªáu</button>
            </form>
        
            <hr>
        
            <!-- D·ªØ Li·ªáu H·ªçc T·∫≠p -->
            <h2>D·ªØ Li·ªáu H·ªçc T·∫≠p</h2>
            <table border="1">
                <thead>
                    <tr>
                        <th>Tu·∫ßn</th>
                        <th>L·ªõp</th>
                        <th>Gi·ªù A</th>
                        <th>Gi·ªù B</th>
                        <th>Gi·ªù C</th>
                        <th>Gi·ªù D</th>
                        <th>ƒê·∫°t Ki·ªÉu M·∫´u</th>
                        <th>T·ªïng ƒêi·ªÉm</th>
                        <th>Thao T√°c</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in study_data %}
                    <tr>
                        <td>{{ item.tuan }}</td>
                        <td>{{ item.lop }}</td>
                        <td>{{ item.gio_a }}</td>
                        <td>{{ item.gio_b }}</td>
                        <td>{{ item.gio_c }}</td>
                        <td>{{ item.gio_d }}</td>
                        <td>{{ item.dat_kieu_mau }}</td>
                        <td>{{ item.tong_diem }}</td>
                        <td>
                            <form method="POST" action="/delete-hoc-tap" style="display:inline;">
                                <input type="hidden" name="data_id" value="{{ item.id }}">
                                <button type="submit">X√≥a</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        
            <hr>
        
            <!-- D·ªØ Li·ªáu N·ªôi Quy -->
            <h2>D·ªØ Li·ªáu N·ªôi Quy</h2>
            <table border="1">
                <thead>
                    <tr>
                        <th>Tu·∫ßn</th>
                        <th>L·ªõp</th>
                        <th>N·ªôi Dung Vi Ph·∫°m</th>
                        <th>ƒê√°nh Gi√°</th>
                        <th>S·ªë L∆∞·ª£t Vi Ph·∫°m</th>
                        <th>Thao T√°c</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in rules_data %}
                    <tr>
                        <td>{{ item.tuan }}</td>
                        <td>{{ item.lop }}</td>
                        <td>{{ item.noi_dung_vi_pham }}</td>
                        <td>{{ item.danh_gia }}</td>
                        <td>{{ item.so_luot_vi_pham }}</td>
                        <td>
                            <form method="POST" action="/delete-noi-quy" style="display:inline;">
                                <input type="hidden" name="data_id" value="{{ item.id }}">
                                <button type="submit">X√≥a</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </body>
        </html>
        
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
        h2 { margin-top: 40px; }
    </style>
</head>
<body>
    {% if 'username' in session %}
        <h1>Ch√†o {{ session['username'] }}!</h1>
        <p><strong>L·ªõp tr·ª±c:</strong> {{ lop }}</p>
        <p><strong>Tu·∫ßn:</strong> {{ tuan }}</p>

        <h2>Ch·ª©c nƒÉng</h2>
        <ul>
            {% if session['role'] == 'admin' %}
                <li><a href="{{ url_for('admin') }}">üõ† Qu·∫£n l√Ω th√¥ng tin</a></li>
                <li><a href="{{ url_for('tong_ket') }}">üìä T·ªïng k·∫øt</a></li>
            {% endif %}
            {% if session['role'] in ['admin', 'user'] %}
                <li><a href="{{ url_for('hoc_tap') }}">üìò H·ªçc t·∫≠p</a></li>
                <li><a href="{{ url_for('noi_quy') }}">üìí N·ªôi quy</a></li>
            {% endif %}
            {% if session['role'] == 'user' %}
                <li><a href="{{ url_for('user') }}">üë§ Trang ng∆∞·ªùi d√πng</a></li>
            {% elif session['role'] == 'viewer' %}
                <li><a href="{{ url_for('viewer') }}">üëÅ Trang xem</a></li>
            {% endif %}
            <li><a href="{{ url_for('logout') }}">üö™ ƒêƒÉng xu·∫•t</a></li>
        </ul>

        <!-- Form Th√™m D·ªØ Li·ªáu H·ªçc T·∫≠p -->
        <h2>‚úçÔ∏è Th√™m D·ªØ Li·ªáu H·ªçc T·∫≠p</h2>
        <form method="POST">
            <input type="text" name="tuan" placeholder="Tu·∫ßn" required>
            <input type="text" name="lop" placeholder="L·ªõp" required>
            <input type="number" name="gio_a" placeholder="S·ªë gi·ªù A" required>
            <input type="number" name="gio_b" placeholder="S·ªë gi·ªù B" required>
            <input type="number" name="gio_c" placeholder="S·ªë gi·ªù C" required>
            <input type="number" name="gio_d" placeholder="S·ªë gi·ªù D" required>
            <input type="text" name="dat_kieu_mau" placeholder="ƒê·∫°t ki·ªÉu m·∫´u" required>
            <button type="submit" name="add_study_data">Th√™m D·ªØ Li·ªáu</button>
        </form>

        <!-- Form Th√™m D·ªØ Li·ªáu N·ªôi Quy -->
        <h2>‚úçÔ∏è Th√™m D·ªØ Li·ªáu N·ªôi Quy</h2>
        <form method="POST">
            <input type="text" name="tuan" placeholder="Tu·∫ßn" required>
            <input type="text" name="lop" placeholder="L·ªõp" required>
            <textarea name="noi_dung_vi_pham" placeholder="N·ªôi dung vi ph·∫°m" required></textarea>
            <input type="text" name="danh_gia" placeholder="ƒê√°nh gi√°" required>
            <input type="number" name="so_luot_vi_pham" placeholder="S·ªë l∆∞·ª£t vi ph·∫°m" required>
            <button type="submit" name="add_rules_data">Th√™m D·ªØ Li·ªáu</button>
        </form>

        <!-- Ph·∫ßn H·ªçc T·∫≠p -->
        <h2>üìò D·ªØ Li·ªáu H·ªçc T·∫≠p</h2>
        <table>
            <thead>
                <tr>
                    <th>Tu·∫ßn</th>
                    <th>L·ªõp</th>
                    <th>Gi·ªù A</th>
                    <th>Gi·ªù B</th>
                    <th>Gi·ªù C</th>
                    <th>Gi·ªù D</th>
                    <th>ƒê·∫°t ki·ªÉu m·∫´u</th>
                    <th>T·ªïng ƒëi·ªÉm</th>
                    <th>Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                {% for item in study_data %}
                <tr>
                    <td>{{ item.tuan }}</td>
                    <td>{{ item.lop }}</td>
                    <td>{{ item.gio_a }}</td>
                    <td>{{ item.gio_b }}</td>
                    <td>{{ item.gio_c }}</td>
                    <td>{{ item.gio_d }}</td>
                    <td>{{ item.dat_kieu_mau }}</td>
                    <td>{{ item.tong_diem }}</td>
                    <td>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="data_id" value="{{ item.id }}">
                            <button type="submit" name="delete_data">X√≥a</button>
                        </form>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="data_id" value="{{ item.id }}">
                            <button type="submit" name="update_data">C·∫≠p nh·∫≠t</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Ph·∫ßn N·ªôi Quy -->
        <h2>üìí D·ªØ Li·ªáu N·ªôi Quy</h2>
        <table>
            <thead>
                <tr>
                    <th>Tu·∫ßn</th>
                    <th>L·ªõp</th>
                    <th>N·ªôi dung vi ph·∫°m</th>
                    <th>ƒê√°nh gi√°</th>
                    <th>S·ªë l∆∞·ª£t vi ph·∫°m</th>
                    <th>Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                {% for item in rules_data %}
                <tr>
                    <td>{{ item.tuan }}</td>
                    <td>{{ item.lop }}</td>
                    <td>{{ item.noi_dung_vi_pham }}</td>
                    <td>{{ item.danh_gia }}</td>
                    <td>{{ item.so_luot_vi_pham }}</td>
                    <td>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="data_id" value="{{ item.id }}">
                            <button type="submit" name="delete_data">X√≥a</button>
                        </form>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="data_id" value="{{ item.id }}">
                            <button type="submit" name="update_data">C·∫≠p nh·∫≠t</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% else %}
        <p>Vui l√≤ng <a href="{{ url_for('login') }}">ƒëƒÉng nh·∫≠p</a> ƒë·ªÉ truy c·∫≠p n·ªôi dung.</p>
    {% endif %}
</body>
</html>
